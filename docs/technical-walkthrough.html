<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GTM Brain — Technical Architecture</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#f8f9fc;--surface:#ffffff;--surface2:#f0f2f5;--border:#e8eaef;--accent:#8e99e1;--accent2:#7c88d4;--green:#10b981;--yellow:#d97706;--red:#ef4444;--text:#1f2937;--muted:#6b7280;--dim:#9ca3af}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}
a{color:var(--accent);text-decoration:none}
a:hover{color:var(--accent2)}

.hero{background:linear-gradient(135deg,#f0f2ff 0%,#f8f9fc 100%);padding:64px 40px 48px;text-align:center;border-bottom:1px solid var(--border)}
.hero h1{font-size:2.2rem;font-weight:700;letter-spacing:-0.02em;margin-bottom:10px}
.hero h1 span{color:var(--accent)}
.hero p{font-size:1rem;color:var(--muted);max-width:640px;margin:0 auto 28px}
.hero-stats{display:flex;justify-content:center;gap:40px;flex-wrap:wrap}
.hero-stat{text-align:center}
.hero-stat .num{font-size:1.75rem;font-weight:700;color:var(--accent)}
.hero-stat .label{font-size:0.7rem;color:var(--dim);text-transform:uppercase;letter-spacing:0.08em}

nav.toc{background:var(--surface);border-bottom:1px solid var(--border);padding:10px 40px;position:sticky;top:0;z-index:100;display:flex;gap:2px;overflow-x:auto;-webkit-overflow-scrolling:touch}
nav.toc a{padding:7px 14px;border-radius:6px;font-size:0.78rem;font-weight:500;color:var(--muted);white-space:nowrap;transition:all 0.2s}
nav.toc a:hover,nav.toc a.active{background:rgba(142,153,225,0.1);color:var(--accent)}

.container{max-width:1060px;margin:0 auto;padding:36px 24px}
section{margin-bottom:52px}
section h2{font-size:1.35rem;font-weight:700;margin-bottom:6px;color:var(--text);display:flex;align-items:center;gap:10px}
section h2 .icon{width:30px;height:30px;border-radius:7px;display:flex;align-items:center;justify-content:center;flex-shrink:0;background:rgba(142,153,225,0.12)}
section h2 .icon svg{width:18px;height:18px;stroke:var(--accent);stroke-width:2;fill:none;stroke-linecap:round;stroke-linejoin:round}
section .subtitle{color:var(--muted);font-size:0.85rem;margin-bottom:20px}
h3{font-size:1rem;font-weight:600;margin:20px 0 10px;color:var(--text)}

.card{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:18px;margin-bottom:12px;box-shadow:0 1px 2px rgba(0,0,0,0.03)}
.card-title{font-weight:600;font-size:0.88rem;margin-bottom:6px;display:flex;align-items:center;gap:8px}
.card-title .badge{font-size:0.6rem;padding:2px 7px;border-radius:99px;font-weight:600;text-transform:uppercase;letter-spacing:0.04em}
.badge-green{background:rgba(16,185,129,0.1);color:var(--green)}
.badge-yellow{background:rgba(217,119,6,0.1);color:var(--yellow)}
.badge-accent{background:rgba(142,153,225,0.12);color:var(--accent)}
.badge-red{background:rgba(239,68,68,0.1);color:var(--red)}

.flow{display:flex;align-items:stretch;gap:0;margin:20px 0;overflow-x:auto;padding-bottom:6px}
.flow-step{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:12px;min-width:140px;text-align:center;flex-shrink:0;box-shadow:0 1px 2px rgba(0,0,0,0.03)}
.flow-step .step-num{font-size:0.6rem;color:var(--dim);text-transform:uppercase;letter-spacing:0.08em;margin-bottom:3px}
.flow-step .step-title{font-weight:600;font-size:0.8rem;margin-bottom:2px}
.flow-step .step-detail{font-size:0.7rem;color:var(--muted)}
.flow-arrow{display:flex;align-items:center;color:var(--dim);font-size:1rem;padding:0 3px;flex-shrink:0}

table{width:100%;border-collapse:collapse;margin:12px 0;font-size:0.82rem}
th{text-align:left;padding:8px 10px;background:var(--surface2);color:var(--muted);font-weight:600;font-size:0.72rem;text-transform:uppercase;letter-spacing:0.04em;border-bottom:1px solid var(--border)}
td{padding:8px 10px;border-bottom:1px solid var(--border)}
tr:hover td{background:rgba(142,153,225,0.03)}
code{background:var(--surface2);padding:1px 5px;border-radius:3px;font-size:0.78rem;font-family:'SF Mono','Fira Code',monospace}

.grid{display:grid;gap:12px}
.grid-2{grid-template-columns:1fr 1fr}
.grid-3{grid-template-columns:1fr 1fr 1fr}
@media(max-width:768px){.grid-2,.grid-3{grid-template-columns:1fr}.hero h1{font-size:1.6rem}.hero-stats{gap:20px}nav.toc{padding:8px 16px}}

.shield{display:inline-flex;align-items:center;gap:5px;background:rgba(16,185,129,0.08);border:1px solid rgba(16,185,129,0.15);padding:3px 10px;border-radius:5px;font-size:0.75rem;color:var(--green);font-weight:500}

.data-flow-diagram{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:28px;margin:20px 0;box-shadow:0 1px 3px rgba(0,0,0,0.04)}

.footer{text-align:center;padding:32px;color:var(--dim);font-size:0.72rem;border-top:1px solid var(--border)}
</style>
</head>
<body>

<div class="hero">
<h1>GTM <span>Brain</span> — Technical Architecture</h1>
<p>Multi-surface AI platform connecting Salesforce, Microsoft Graph, Slack, and Obsidian into a unified sales operations system.</p>
<div class="hero-stats">
<div class="hero-stat"><div class="num">3</div><div class="label">Interfaces</div></div>
<div class="hero-stat"><div class="num">21</div><div class="label">Query Intents</div></div>
<div class="hero-stat"><div class="num">41+</div><div class="label">Users</div></div>
<div class="hero-stat"><div class="num">0</div><div class="label">Customer Data on Disk</div></div>
</div>
</div>

<nav class="toc" id="toc">
<a href="#overview">Overview</a>
<a href="#query-ai">Query & AI Pipeline</a>
<a href="#data-security">Data & Security</a>
<a href="#salesforce">Salesforce</a>
<a href="#calendar-desktop">Calendar & Desktop</a>
<a href="#orchestration">Orchestration</a>
<a href="#infrastructure">Infrastructure</a>
</nav>

<div class="container">

<!-- ═══════════ 1. SYSTEM OVERVIEW ═══════════ -->
<section id="overview">
<h2><span class="icon"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg></span> System Overview</h2>
<p class="subtitle">Three interfaces, one intelligence layer, zero customer data persisted to application disk.</p>

<div class="data-flow-diagram">
<div class="grid grid-3">
<div style="text-align:center">
<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom:6px"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
<div style="font-weight:600;font-size:0.85rem">Obsidian Plugin</div>
<div style="font-size:0.72rem;color:var(--muted)">Desktop / TypeScript / 7,645 lines</div>
</div>
<div style="text-align:center">
<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom:6px"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
<div style="font-weight:600;font-size:0.85rem">GTM Hub (Web)</div>
<div style="font-size:0.72rem;color:var(--muted)">Okta SSO / Meeting Prep / GTM Brain Chat</div>
</div>
<div style="text-align:center">
<svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-bottom:6px"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
<div style="font-weight:600;font-size:0.85rem">Slack Bot</div>
<div style="font-size:0.72rem;color:var(--muted)">Bolt Framework / 50+ intents / Weekly PDFs</div>
</div>
</div>

<div style="text-align:center;margin:20px 0 14px;color:var(--dim);font-size:1.2rem">&#8595; &nbsp; &#8595; &nbsp; &#8595;</div>

<div style="text-align:center;padding:16px;background:rgba(142,153,225,0.06);border:1px solid rgba(142,153,225,0.15);border-radius:8px;margin-bottom:14px">
<div style="font-weight:700;font-size:0.95rem;margin-bottom:3px">Node.js / Express — Intelligence Layer</div>
<div style="font-size:0.76rem;color:var(--muted)">Render.com &bull; Auto-deploy from GitHub &bull; Query engine, calendar, transcription, enrichment, reports</div>
</div>

<div style="text-align:center;margin:10px 0;color:var(--dim);font-size:1.2rem">&#8595; &nbsp; &#8595; &nbsp; &#8595; &nbsp; &#8595; &nbsp; &#8595;</div>

<div class="grid" style="grid-template-columns:repeat(5,1fr);gap:6px">
<div style="text-align:center;padding:10px;background:var(--surface2);border-radius:6px;border:1px solid var(--border)"><div style="font-size:0.72rem;font-weight:600">Salesforce</div><div style="font-size:0.62rem;color:var(--muted)">jsforce v2</div></div>
<div style="text-align:center;padding:10px;background:var(--surface2);border-radius:6px;border:1px solid var(--border)"><div style="font-size:0.72rem;font-weight:600">MS Graph</div><div style="font-size:0.62rem;color:var(--muted)">Calendar API</div></div>
<div style="text-align:center;padding:10px;background:var(--surface2);border-radius:6px;border:1px solid var(--border)"><div style="font-size:0.72rem;font-weight:600">Claude</div><div style="font-size:0.62rem;color:var(--muted)">Anthropic API</div></div>
<div style="text-align:center;padding:10px;background:var(--surface2);border-radius:6px;border:1px solid var(--border)"><div style="font-size:0.72rem;font-weight:600">Whisper</div><div style="font-size:0.62rem;color:var(--muted)">OpenAI</div></div>
<div style="text-align:center;padding:10px;background:var(--surface2);border-radius:6px;border:1px solid var(--border)"><div style="font-size:0.72rem;font-weight:600">PostgreSQL</div><div style="font-size:0.62rem;color:var(--muted)">L2 Cache</div></div>
</div>
</div>
</section>

<!-- ═══════════ 2. QUERY & AI PIPELINE ═══════════ -->
<section id="query-ai">
<h2><span class="icon"><svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></span> Query & AI Pipeline</h2>
<p class="subtitle">Natural language question to Salesforce answer in under 3 seconds. Deterministic routing, LLM response only.</p>

<div class="flow">
<div class="flow-step"><div class="step-num">Step 1</div><div class="step-title">User Query</div><div class="step-detail">Slack, Web, or Obsidian</div></div>
<div class="flow-arrow">&#8594;</div>
<div class="flow-step"><div class="step-num">Step 2</div><div class="step-title">Cross-Account Detection</div><div class="step-detail">15 regex signals</div></div>
<div class="flow-arrow">&#8594;</div>
<div class="flow-step"><div class="step-num">Step 3</div><div class="step-title">Intent Classification</div><div class="step-detail">4-layer cascade</div></div>
<div class="flow-arrow">&#8594;</div>
<div class="flow-step"><div class="step-num">Step 4</div><div class="step-title">Data Gathering</div><div class="step-detail">Parallel SOQL</div></div>
<div class="flow-arrow">&#8594;</div>
<div class="flow-step"><div class="step-num">Step 5</div><div class="step-title">Claude Response</div><div class="step-detail">Formatted answer</div></div>
</div>

<h3>4-Layer Intent Cascade</h3>
<div class="grid grid-2">
<div class="card"><div class="card-title">Layer 1: Priority Regex <span class="badge badge-green">Fastest</span></div><p style="font-size:0.78rem;color:var(--muted)">14 unambiguous patterns bypass ML entirely. E.g., <code>/forecast|commit.*weighted/i</code> &#8594; FORECAST. Under 1ms.</p></div>
<div class="card"><div class="card-title">Layer 2: ML Classifier <span class="badge badge-accent">Learned</span></div><p style="font-size:0.78rem;color:var(--muted)">29 mapped intents via persistent learning model. Trained on real user queries with feedback loop from reactions.</p></div>
<div class="card"><div class="card-title">Layer 3: Semantic Similarity <span class="badge badge-yellow">Embeddings</span></div><p style="font-size:0.78rem;color:var(--muted)">Vector similarity matching against known query patterns. Handles paraphrased questions that don't match exact keywords.</p></div>
<div class="card"><div class="card-title">Layer 4: LLM Fallback <span class="badge badge-red">Last Resort</span></div><p style="font-size:0.78rem;color:var(--muted)">Advanced intent parser for classification only. The LLM never decides what data to fetch or what to write.</p></div>
</div>

<h3>21 Intent Types</h3>
<table>
<tr><th>Intent</th><th>Example</th><th>Data Source</th></tr>
<tr><td><code>FORECAST</code></td><td>"What's our forecast?"</td><td>Quarterly_Commit__c, Weighted_ACV</td></tr>
<tr><td><code>PIPELINE_OVERVIEW</code></td><td>"Late stage deals"</td><td>Aggregate SOQL on active pipeline</td></tr>
<tr><td><code>OWNER_ACCOUNTS</code></td><td>"Olivia's pipeline"</td><td>User &#8594; Account &#8594; Opportunities</td></tr>
<tr><td><code>MEETING_ACTIVITY</code></td><td>"Who did we meet this week?"</td><td>MS Graph calendar + SF Events</td></tr>
<tr><td><code>DEALS_SIGNED</code></td><td>"What have we signed?"</td><td>IsWon = true, THIS_FISCAL_QUARTER</td></tr>
<tr><td><code>PRE_MEETING</code></td><td>"Prep me for Airbnb"</td><td>Account + Opps + Contacts + Events + Customer_Brain__c</td></tr>
</table>

<h3>AI Design Philosophy</h3>
<div class="card">
<p style="font-size:0.82rem;color:var(--muted)"><strong>Deterministic routing + LLM response.</strong> The LLM never decides what data to fetch. Regex/ML classification &#8594; exact SOQL &#8594; real data &#8594; Claude formats the response. Prompts inject TODAY'S DATE, enforce factual-only output, and prohibit fabrication.</p>
</div>

<table>
<tr><th>Component</th><th>Model</th><th>Purpose</th></tr>
<tr><td>Query responses</td><td>Claude (Anthropic)</td><td>Format Salesforce data into natural language</td></tr>
<tr><td>Meeting context</td><td>Claude</td><td>Synthesize account context for meeting prep</td></tr>
<tr><td>Transcription</td><td>OpenAI Whisper</td><td>Audio to text for meeting recordings</td></tr>
<tr><td>Summarization</td><td>GPT-4o</td><td>Meeting transcript to structured summary</td></tr>
<tr><td>Speaker diarization</td><td>AssemblyAI</td><td>Separate rep vs. customer voices</td></tr>
</table>
</section>

<!-- ═══════════ 3. DATA & SECURITY ═══════════ -->
<section id="data-security">
<h2><span class="icon"><svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></span> Data & Security</h2>
<p class="subtitle">Zero Render Storage pattern. Enterprise-grade security with defense-in-depth.</p>

<div class="card" style="border-color:var(--green)">
<div class="card-title"><span class="shield">Zero Disk Persistence</span></div>
<p style="font-size:0.82rem;color:var(--muted)">All customer account, opportunity, contact, and contract data lives exclusively in Salesforce. The application holds only ephemeral in-memory caches with short TTLs. No customer data is written to Render's filesystem.</p>
</div>

<table>
<tr><th>Data Type</th><th>Storage</th><th>TTL</th></tr>
<tr><td>Account / Opportunity / Contact</td><td>Salesforce (source of truth)</td><td>Permanent</td></tr>
<tr><td>Meeting notes</td><td>Salesforce <code>Customer_Brain__c</code></td><td>Permanent</td></tr>
<tr><td>Calendar events</td><td>In-memory cache</td><td>10-15 min</td></tr>
<tr><td>AI summaries</td><td>In-memory cache</td><td>2 hours</td></tr>
<tr><td>Account context</td><td>In-memory cache</td><td>3-15 min</td></tr>
<tr><td>OAuth tokens</td><td>Encrypted file (AES-256-GCM)</td><td>Persistent</td></tr>
</table>

<h3>Security Controls</h3>
<div class="grid grid-2">
<div class="card">
<div class="card-title">Authentication</div>
<ul style="font-size:0.78rem;color:var(--muted);padding-left:16px;line-height:1.5">
<li><strong>GTM Hub:</strong> Okta SSO (OIDC)</li>
<li><strong>Salesforce:</strong> Service account + per-user OAuth (PKCE)</li>
<li><strong>Calendar:</strong> Azure AD delegated permissions</li>
<li><strong>Slack:</strong> Bot token + signing secret verification</li>
</ul>
</div>
<div class="card">
<div class="card-title">Data Protection</div>
<ul style="font-size:0.78rem;color:var(--muted);padding-left:16px;line-height:1.5">
<li>Write operations restricted to admin only</li>
<li>AES-256-GCM token encryption</li>
<li>No PII in logs (Winston structured logging)</li>
<li>CSP headers on all web endpoints</li>
</ul>
</div>
</div>

<div class="card">
<div class="card-title">Vendor Compliance</div>
<p style="font-size:0.78rem;color:var(--muted)"><strong>Render.com:</strong> SOC 2 Type II, ISO 27001 &bull; <strong>Salesforce:</strong> SOC 2, FedRAMP &bull; <strong>Anthropic:</strong> SOC 2 Type II, no training on API data &bull; <strong>OpenAI:</strong> SOC 2, no API training &bull; <strong>Microsoft:</strong> Azure AD enterprise platform</p>
</div>
</section>

<!-- ═══════════ 4. SALESFORCE ═══════════ -->
<section id="salesforce">
<h2><span class="icon"><svg viewBox="0 0 24 24"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"/></svg></span> Salesforce Integration</h2>
<p class="subtitle">jsforce v2 beta. Service account for reads, per-user OAuth for writes.</p>

<div class="grid grid-2">
<div class="card"><div class="card-title">Service Account (Reads)</div><p style="font-size:0.78rem;color:var(--muted)">Shared service account for SOQL, SOSL, and metadata reads. Auto-reconnects on session expiry. Circuit breaker with 15-min cooldown.</p></div>
<div class="card"><div class="card-title">Per-User OAuth (Writes)</div><p style="font-size:0.78rem;color:var(--muted)">PKCE flow for meeting notes sync. Tokens encrypted with AES-256-GCM. Audit trail shows the real user identity.</p></div>
</div>

<table>
<tr><th>Object</th><th>Key Custom Fields</th><th>Purpose</th></tr>
<tr><td>Account</td><td><code>Customer_Brain__c</code>, <code>Account_Display_Name__c</code>, <code>Code_Name__c</code></td><td>Meeting notes, counsel sensitization</td></tr>
<tr><td>Opportunity</td><td><code>ACV__c</code>, <code>Quarterly_Commit__c</code>, <code>Weighted_ACV_AI_Enabled__c</code></td><td>Deal value, AI-enabled forecast</td></tr>
<tr><td>Pipeline_Snapshot__c</td><td>Weekly snapshots</td><td>Pipeline trending</td></tr>
<tr><td>GTM_Usage_Log__c</td><td>Event_Type__c, User_Email__c</td><td>Usage analytics</td></tr>
</table>

<p style="font-size:0.82rem;color:var(--muted);margin-top:8px"><strong>165+ Salesforce Flows</strong> automate stage progression, probability calculation, product sync, CS staffing alerts, campaign influence, and account health scoring.</p>
</section>

<!-- ═══════════ 5. CALENDAR & DESKTOP ═══════════ -->
<section id="calendar-desktop">
<h2><span class="icon"><svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg></span> Calendar & Desktop</h2>
<p class="subtitle">Live Microsoft Graph integration, Obsidian plugin, and real-time transcription.</p>

<div class="flow">
<div class="flow-step"><div class="step-num">Source</div><div class="step-title">MS Graph API</div><div class="step-detail">Azure AD OAuth</div></div>
<div class="flow-arrow">&#8594;</div>
<div class="flow-step"><div class="step-num">Fetch</div><div class="step-title">Per-User Calendar</div><div class="step-detail">Live on request</div></div>
<div class="flow-arrow">&#8594;</div>
<div class="flow-step"><div class="step-num">Filter</div><div class="step-title">External Meetings</div><div class="step-detail">Exclude internal</div></div>
<div class="flow-arrow">&#8594;</div>
<div class="flow-step"><div class="step-num">Match</div><div class="step-title">Account Resolution</div><div class="step-detail">Domain &#8594; SF Account</div></div>
<div class="flow-arrow">&#8594;</div>
<div class="flow-step"><div class="step-num">Cache</div><div class="step-title">In-Memory</div><div class="step-detail">10-min TTL</div></div>
</div>

<div class="grid grid-3">
<div class="card">
<div class="card-title">GTM Hub / Meeting Prep</div>
<p style="font-size:0.78rem;color:var(--muted)">Batch fetch for all BLs in parallel. Filters to customer meetings. Pre-meeting intelligence briefings with account-specific Salesforce data.</p>
</div>
<div class="card">
<div class="card-title">Obsidian Plugin</div>
<p style="font-size:0.78rem;color:var(--muted)">7 sub-notes per account: user notes, meeting notes, contacts, intelligence, next steps. Meeting notes sync to <code>Customer_Brain__c</code> via PKCE.</p>
</div>
<div class="card">
<div class="card-title">Transcription Pipeline</div>
<p style="font-size:0.78rem;color:var(--muted)">Audio capture &#8594; 2-min Whisper chunks &#8594; GPT-4o summary &#8594; SF sync. Speaker diarization via AssemblyAI. 45-min prompt, 90-min hard stop.</p>
</div>
</div>
</section>

<!-- ═══════════ 6. ORCHESTRATION ═══════════ -->
<section id="orchestration">
<h2><span class="icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg></span> Orchestration</h2>
<p class="subtitle">Automated reports, scheduled refreshes, and event-driven workflows.</p>

<table>
<tr><th>Job</th><th>Schedule</th><th>Output</th></tr>
<tr><td>GTM Weekly Snapshot PDF</td><td>Thursday 9 AM EST</td><td>2-page PDF &#8594; Slack #gtm-weekly</td></tr>
<tr><td>Delivery Weekly Summary</td><td>Friday</td><td>PDF + Excel &#8594; Slack</td></tr>
<tr><td>Full Pipeline Report</td><td>Friday</td><td>Excel (Active + Closed Won tabs)</td></tr>
<tr><td>CSM Account Health</td><td>Friday</td><td>Excel &#8594; CS channel</td></tr>
<tr><td>Intelligence Cache Refresh</td><td>Every 6 hours</td><td>Slack channel intelligence extraction</td></tr>
</table>

<h3>Platform Events</h3>
<div class="grid grid-3">
<div class="card"><div class="card-title">Closed Won Alert</div><p style="font-size:0.78rem;color:var(--muted)"><code>Closed_Won_Alert__e</code> fires at Stage 6. Posts celebration to Slack.</p></div>
<div class="card"><div class="card-title">CS Staffing Alert</div><p style="font-size:0.78rem;color:var(--muted)"><code>CS_Staffing_Alert__e</code> fires on staffing flag change. Notifies CS team.</p></div>
<div class="card"><div class="card-title">Channel Intelligence</div><p style="font-size:0.78rem;color:var(--muted)">Monitors Slack channels, extracts deal signals via Claude, syncs to <code>Customer_Brain__c</code>.</p></div>
</div>
</section>

<!-- ═══════════ 7. INFRASTRUCTURE ═══════════ -->
<section id="infrastructure">
<h2><span class="icon"><svg viewBox="0 0 24 24"><rect x="2" y="2" width="20" height="8" rx="2"/><rect x="2" y="14" width="20" height="8" rx="2"/><line x1="6" y1="6" x2="6.01" y2="6"/><line x1="6" y1="18" x2="6.01" y2="18"/></svg></span> Infrastructure</h2>
<p class="subtitle">Git push to auto-deploy in 2-3 minutes. No manual steps.</p>

<div class="grid grid-2">
<div class="card"><div class="card-title">Current: Render.com</div>
<ul style="font-size:0.78rem;color:var(--muted);padding-left:16px;line-height:1.5">
<li>Node.js Web Service, auto-deploy on <code>git push origin main</code></li>
<li>Health check at <code>/health</code></li>
<li>Zero Render Storage (no persistent disk for customer data)</li>
<li><code>.renderignore</code> cuts ~33MB from deploy</li>
</ul>
</div>
<div class="card"><div class="card-title">Future: AWS (Prepared)</div>
<ul style="font-size:0.78rem;color:var(--muted);padding-left:16px;line-height:1.5">
<li>Terraform configs in <code>infrastructure/</code></li>
<li>ECS Fargate + ALB + EFS</li>
<li>Secrets Manager for credentials</li>
<li>VPC with public/private subnets</li>
</ul>
</div>
</div>

<h3>Tech Stack</h3>
<table>
<tr><th>Component</th><th>Technology</th></tr>
<tr><td>Backend</td><td>Node.js + Express.js</td></tr>
<tr><td>Database</td><td>PostgreSQL (L2 cache) + Salesforce (CRM data)</td></tr>
<tr><td>AI</td><td>Claude (responses) + Whisper (STT) + GPT-4o (summaries)</td></tr>
<tr><td>Calendar</td><td>Microsoft Graph API (Azure AD)</td></tr>
<tr><td>Chat</td><td>Slack (Bolt framework, Socket Mode)</td></tr>
<tr><td>Desktop</td><td>Obsidian Plugin (TypeScript, esbuild)</td></tr>
<tr><td>Auth</td><td>Okta SSO + Salesforce OAuth PKCE + Azure AD</td></tr>
<tr><td>Reports</td><td>PDFKit + ExcelJS</td></tr>
</table>

<div class="grid grid-3" style="margin-top:12px">
<div class="card" style="text-align:center"><div style="font-size:1.4rem;font-weight:700;color:var(--accent)">~30K</div><div style="font-size:0.72rem;color:var(--muted)">Lines of Production Code</div></div>
<div class="card" style="text-align:center"><div style="font-size:1.4rem;font-weight:700;color:var(--accent)">45+</div><div style="font-size:0.72rem;color:var(--muted)">Service Modules</div></div>
<div class="card" style="text-align:center"><div style="font-size:1.4rem;font-weight:700;color:var(--accent)">165+</div><div style="font-size:0.72rem;color:var(--muted)">Salesforce Flows</div></div>
</div>
</section>

</div>

<div class="footer">
GTM Brain &mdash; Technical Architecture &bull; Eudia &bull; February 2026<br>
<span style="color:var(--dim)">Confidential &mdash; Internal Use Only</span>
</div>

<script>
const toc = document.getElementById('toc');
const sections = document.querySelectorAll('section[id]');
const tocLinks = toc.querySelectorAll('a');

function updateActiveLink() {
  let current = '';
  sections.forEach(s => {
    if (window.scrollY >= s.offsetTop - 100) current = s.id;
  });
  tocLinks.forEach(a => {
    a.classList.toggle('active', a.getAttribute('href') === '#' + current);
  });
}
window.addEventListener('scroll', updateActiveLink);
updateActiveLink();
</script>
</body>
</html>
